---
import ThemeToggle from "./ThemeToggle.tsx";

interface Props {
  variant?: "space" | "paper";
}

const { variant = "paper" } = Astro.props;
const currentPath = Astro.url.pathname;

const tabs = [
  { label: "About", href: "/" },
  { label: "Articles", href: "/article" },
  { label: "Publications", href: "/publications" },
  { label: "Projects", href: "/projects" },
  { label: "Apps", href: "/apps" },
];

function isActive(href: string): boolean {
  if (href === "/") return currentPath === "/";
  return currentPath.startsWith(href);
}

const isSpace = variant === "space";
---

<nav
  class:list={[
    "sticky top-0 z-50 w-full transition-colors",
    isSpace
      ? "bg-transparent"
      : "bg-paper/90 backdrop-blur-md border-b border-rule",
  ]}
>
  <div class="mx-auto flex max-w-4xl items-center justify-between px-6 py-3">
    <a
      href="/"
      class:list={[
        "space-heading text-sm tracking-wider shrink-0",
        isSpace ? "text-space-fg" : "text-ink",
      ]}
    >
      Seongland
    </a>

    <div class="flex items-center gap-1 overflow-x-auto no-scrollbar">
      {
        tabs.map((tab) => (
          <a
            href={tab.href}
            class:list={[
              "rounded-md px-3 py-1.5 text-xs font-medium tracking-wide transition-colors whitespace-nowrap shrink-0",
              isActive(tab.href)
                ? isSpace
                  ? "text-space-fg bg-space-fg/15"
                  : "text-ink bg-ink/10"
                : isSpace
                  ? "text-space-fg/60 hover:text-space-fg hover:bg-space-fg/10"
                  : "text-ink-3 hover:text-ink hover:bg-ink/5",
            ]}
          >
            {tab.label}
          </a>
        ))
      }
      <div class="ml-1 shrink-0">
        <ThemeToggle client:load />
      </div>
    </div>
  </div>
</nav>

<style>
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
</style>
