---
interface Props {
  title: string
  description?: string
  publishedAt: string
  tags?: string[]
  readingTime?: string
  slug: string
  externalUrl?: string
}

const { title, description, publishedAt, tags = [], readingTime, slug, externalUrl } = Astro.props
const href = externalUrl || `/article/${slug}`
const isExternal = !!externalUrl
---

<a
  href={href}
  target={isExternal ? '_blank' : undefined}
  rel={isExternal ? 'noopener noreferrer' : undefined}
  class="article-card group block rounded-xl p-6 transition-all duration-200"
>
  <div class="flex items-baseline justify-between gap-4">
    <h3 class="serif text-lg text-ink group-hover:text-rust transition-colors">
      {title}
      {isExternal && <span class="text-ink-3 text-xs ml-1">&nearr;</span>}
    </h3>
    <span class="mono text-[11px] text-ink-3 shrink-0">{publishedAt}</span>
  </div>
  {description && <p class="text-sm text-ink-2 mt-2 line-clamp-2">{description}</p>}
  <div class="flex items-center gap-3 mt-3">
    {readingTime && <span class="mono text-[10px] text-ink-3">{readingTime} read</span>}
    {tags.map(tag => (
      <span class="rounded-full px-2.5 py-0.5 text-[10px] text-ink-3 font-medium">{tag}</span>
    ))}
  </div>
</a>

<style>
  .article-card {
    background: var(--color-paper-warm);
    box-shadow:
      4px 4px 8px rgba(0, 0, 0, 0.05),
      -4px -4px 8px rgba(255, 255, 255, 0.6);
  }

  .article-card:hover {
    box-shadow:
      6px 6px 12px rgba(0, 0, 0, 0.08),
      -6px -6px 12px rgba(255, 255, 255, 0.7);
    transform: translateY(-1px);
  }

  .article-card:active {
    box-shadow:
      inset 3px 3px 6px rgba(0, 0, 0, 0.06),
      inset -3px -3px 6px rgba(255, 255, 255, 0.5);
    transform: translateY(0);
  }

  [data-theme='dark'] .article-card {
    background: var(--color-paper-warm-dark);
    box-shadow:
      4px 4px 8px rgba(0, 0, 0, 0.25),
      -4px -4px 8px rgba(255, 255, 255, 0.02);
  }

  [data-theme='dark'] .article-card:hover {
    box-shadow:
      6px 6px 12px rgba(0, 0, 0, 0.35),
      -6px -6px 12px rgba(255, 255, 255, 0.03);
  }

  [data-theme='dark'] .article-card:active {
    box-shadow:
      inset 3px 3px 6px rgba(0, 0, 0, 0.35),
      inset -3px -3px 6px rgba(255, 255, 255, 0.01);
  }
</style>
